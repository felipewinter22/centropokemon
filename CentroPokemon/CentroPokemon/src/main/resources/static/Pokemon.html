<!DOCTYPE html>
<!--
@file        Pokemon.html
@summary     P√°gina ‚ÄúIndex‚Äù do Centro Pok√©mon
@description Landing page com header padr√£o, se√ß√µes de boas-vindas,
             estat√≠sticas, destaque do dia, a√ß√µes r√°pidas, not√≠cias,
             equipe m√©dica e oferta.
@css         /css/novo-style.css
@js          /js/animacoes.js (navega entre se√ß√µes por √¢ncoras e pathname)
-->
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro Pok√©mon - P√°gina B√°sica</title>
    <link rel="stylesheet" href="/css/novo-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <!--
    @section    Header
    @purpose    Cabe√ßalho fixo com navega√ß√£o principal
@links      In√≠cio (/), Pok√©dex (/pokedex), Centro de Cura (/centro), Sobre (/sobre)
    -->
    <header>
        <div class="auth-links auth-top-right">
            <a href="/cadastro.html">Cadastro</a>
            <a href="/login.html">Login</a>
        </div>
        <div class="header-content header-stacked">
            <h1>Centro Pok√©mon</h1>
            <nav>
                <ul>
                    <li><a href="/Pokemon.html" class="active">In√≠cio</a></li>
                    <li><a href="/pokedex">Pok√©dex</a></li>
                    <li><a href="/centro">Centro de Cura</a></li>
                    <li><a href="/sobre">Sobre</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    
    
    

    <!-- CONTE√öDO PRINCIPAL -->
    <main>
        <!-- P√ÅGINA INICIAL TOTALMENTE NOVA - SISTEMA DE SA√öDE POK√âMON DIGITAL -->
        <div class="pagina ativa" id="inicio">
            <div class="pagina-content">
                <!-- HERO SECTION - CENTRO M√âDICO POK√âMON -->
                <section class="medical-hero">
                    <div class="hero-content">
                        <div class="hero-text">
                            <h2>Centro M√©dico Pok√©mon</h2>
                            <p class="hero-subtitle">Cuidados especializados 24/7 para seus parceiros</p>
                            <div class="hero-stats">
                                <div class="stat-item">
                                    <span class="stat-number">98%</span>
                                    <span class="stat-label">Taxa de recupera√ß√£o</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">15min</span>
                                    <span class="stat-label">Tempo m√©dio de espera</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">500+</span>
                                    <span class="stat-label">Esp√©cies atendidas</span>
                                </div>
                            </div>
                        </div>
                        <div class="hero-visual">
                            <div class="medical-monitor">
                                <div class="monitor-screen">
                                    <div class="ecg-animation">
                                        <div class="ecg-line"></div>
                                        <div class="heartbeat">‚ù§Ô∏è</div>
                                    </div>
                                    <div class="patient-data">
                                        <span class="patient-name">Pikachu</span>
                                        <span class="patient-status">Est√°vel</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TRIAGEM VIRTUAL -->
                <section class="virtual-triage">
                    <h3>Triagem Virtual R√°pida</h3>
                    <p class="triage-description">Descreva os sintomas do seu Pok√©mon para priorizar o atendimento</p>
                    
                    <div class="triage-form">
                        <div class="symptom-selector">
                            <label>Sintomas principais:</label>
                            <div class="symptom-chips">
                                <button class="symptom-chip" data-symptom="febre">Febre</button>
                                <button class="symptom-chip" data-symptom="fraqueza">Fraqueza</button>
                                <button class="symptom-chip" data-symptom="ferimentos">Ferimentos</button>
                                <button class="symptom-chip" data-symptom="queimaduras">Queimaduras</button>
                                <button class="symptom-chip" data-symptom="paralisia">Paralisia</button>
                                <button class="symptom-chip" data-symptom="envenenamento">Envenenamento</button>
                            </div>
                        </div>
                        
                        <div class="urgency-assessment">
                            <label>N√≠vel de urg√™ncia:</label>
                            <div class="urgency-scale">
                                <div class="urgency-level" data-level="1">
                                    <span>Leve</span>
                                    <div class="urgency-bar"></div>
                                </div>
                                <div class="urgency-level" data-level="2">
                                    <span>Moderado</span>
                                    <div class="urgency-bar"></div>
                                </div>
                                <div class="urgency-level" data-level="3">
                                    <span>Urgente</span>
                                    <div class="urgency-bar"></div>
                                </div>
                                <div class="urgency-level" data-level="4">
                                    <span>Emerg√™ncia</span>
                                    <div class="urgency-bar"></div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="triage-submit-btn">
                            <span>üîÑ</span>
                            Analisar Sintomas
                        </button>
                    </div>
                </section>

                <!-- DASHBOARD DE SA√öDE -->
                <section class="health-dashboard">
                    <h3>Dashboard de Sa√∫de Pok√©mon</h3>
                    
                    <div class="dashboard-grid">
                        <div class="dashboard-card vital-signs">
                            <h4>Sinais Vitais</h4>
                            <div class="vitals-display">
                                <div class="vital-item">
                                    <span class="vital-label">Batimentos</span>
                                    <span class="vital-value">120 bpm</span>
                                </div>
                                <div class="vital-item">
                                    <span class="vital-label">Temperatura</span>
                                    <span class="vital-value">38.2¬∞C</span>
                                </div>
                                <div class="vital-item">
                                    <span class="vital-label">Energia</span>
                                    <span class="vital-value">85%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card appointment-tracker">
                            <h4>Pr√≥ximas Consultas</h4>
                            <div class="appointment-list">
                                <div class="appointment-item">
                                    <span class="appointment-time">Hoje - 14:30</span>
                                    <span class="appointment-type">Check-up Anual</span>
                                </div>
                                <div class="appointment-item">
                                    <span class="appointment-time">Amanh√£ - 10:00</span>
                                    <span class="appointment-type">Vacina√ß√£o</span>
                                </div>
                            </div>
                            <button class="schedule-btn">
                                <span>üìÖ</span>
                                Agendar Nova
                            </button>
                        </div>
                        
                        <div class="dashboard-card emergency-protocols">
                            <h4>Protocolos de Emerg√™ncia</h4>
                            <div class="protocol-list">
                                <div class="protocol-item">
                                    <span class="protocol-icon">üî•</span>
                                    <span>Queimaduras</span>
                                </div>
                                <div class="protocol-item">
                                    <span class="protocol-icon">‚ö°</span>
                                    <span>Paralisia</span>
                                </div>
                                <div class="protocol-item">
                                    <span class="protocol-icon">‚ò†Ô∏è</span>
                                    <span>Envenenamento</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PRONTU√ÅRIO ELETR√îNICO -->
                <section class="electronic-record">
                    <h3>Prontu√°rio Eletr√¥nico</h3>
                    
                    <div class="record-container">
                        <div class="record-header">
                            <div class="patient-info">
                                <span class="patient-avatar">üê≠</span>
                                <div class="patient-details">
                                    <span class="patient-name">Pikachu - N√≠vel 25</span>
                                    <span class="patient-id">ID: #0025</span>
                                </div>
                            </div>
                            <button class="view-full-record">Ver hist√≥rico completo</button>
                        </div>
                        
                        <div class="record-timeline">
                            <div class="timeline-item">
                                <span class="timeline-date">21/11/2024</span>
                                <span class="timeline-event">Vacina√ß√£o antirr√°bica</span>
                                <span class="timeline-doctor">Enf. Joy</span>
                            </div>
                            <div class="timeline-item">
                                <span class="timeline-date">15/11/2024</span>
                                <span class="timeline-event">Check-up geral</span>
                                <span class="timeline-doctor">Dr. Carvalho</span>
                            </div>
                            <div class="timeline-item">
                                <span class="timeline-date">05/11/2024</span>
                                <span class="timeline-event">Tratamento para queimaduras</span>
                                <span class="timeline-doctor">Enf. Joy</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- BOT√ïES DE A√á√ÉO R√ÅPIDA -->
                <div class="medical-actions">
                    <a href="/centro" class="medical-action-btn primary">
                        <span>üè•</span>
                        Agendar Consulta
                    </a>
                    <a href="/pokedex" class="medical-action-btn secondary">
                        <span>ÔøΩ</span>
                        Ver Pok√©dex M√©dica
                    </a>
                    <a href="/sobre" class="medical-action-btn tertiary">
                        <span>ÔøΩ</span>
                        Falar com Especialista
                    </a>
                </div>
            </div><!-- FIM DO PAGINA-CONTENT -->
    </div><!-- FIM DO INICIO -->
    </main>
    <div class="pagina" id="centro">
        <h2>Centro de Cura</h2>
        <div class="pagina-content">
            <div class="agendamento-container">
                <div class="agendamento-form-card">
                    <h3>Agendar Consulta</h3>
                    <form id="agendar-consulta-form">
                        <div class="form-row">
                            <label for="pokemon-select">Pok√©mon</label>
                            <select id="pokemon-select" required></select>
                        </div>
                        <div class="form-row">
                            <label for="tipo-consulta">Tipo</label>
                            <select id="tipo-consulta" required>
                                <option value="CONSULTA">Consulta</option>
                                <option value="VACINACAO">Vacina√ß√£o</option>
                                <option value="CHECKUP">Check-up</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label for="datahora-consulta">Data e Hora</label>
                            <input id="datahora-consulta" type="datetime-local" required />
                        </div>
                        <div class="form-row">
                            <label for="obs-consulta">Observa√ß√µes</label>
                            <textarea id="obs-consulta" rows="3" placeholder="Opcional"></textarea>
                        </div>
                        <div class="agendar-actions">
                            <button type="submit" class="btn primary">Agendar</button>
                            <a href="#consultas-list" class="btn secondary">Ver agendamentos</a>
                        </div>
                        <div id="agendar-alert" class="alert" role="alert"></div>
                    </form>
                </div>

                <div class="agendadas-card" id="consultas-list">
                    <h3>Consultas Agendadas</h3>
                    <div class="consultas-grid" id="consultas-grid"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="pagina" id="sobre">
        <h2>Sobre o Centro Pok√©mon</h2>
        
        <div class="sobre-hero">
            <img src="/imagens/sobre.png" alt="Centro Pok√©mon" class="sobre-imagem-destaque">
            <div class="sobre-texto-hero">
                <h3>Cuide dos seus parceiros com excel√™ncia!</h3>
                <p>O Centro Pok√©mon oferece cuidados completos aos seus parceiros, com equipe dedicada e tecnologia de ponta. Somos refer√™ncia em sa√∫de Pok√©mon em toda a regi√£o.</p>
            </div>
        </div>

        <div class="sobre-grid">
            <div class="sobre-card">
                <img src="/imagens/Professor-Oak-from-Poke - mon-Black-and-White.png" alt="Professor Carvalho" class="sobre-card-img">
                <h4>Equipe Especializada</h4>
                <p>Profissionais treinados pela Liga Pok√©mon com anos de experi√™ncia no cuidado de todas as esp√©cies.</p>
            </div>
            
            <div class="sobre-card">
                <img src="/imagens/Bag_Master_Ball_SV_Sprite.png" alt="Tecnologia Avan√ßada" class="sobre-card-img">
                <h4>Tecnologia de Ponta</h4>
                <p>Equipamentos modernos e tratamentos inovadores para garantir a sa√∫de do seu Pok√©mon.</p>
            </div>
            
            <div class="sobre-card">
                <img src="/imagens/rare-candy.png" alt="Tratamentos Especiais" class="sobre-card-img">
                <h4>Tratamentos Exclusivos</h4>
                <p>Desde curas b√°sicas at√© tratamentos especiais para Pok√©mon lend√°rios e raros.</p>
            </div>
        </div>

        <div class="sobre-autores">
            <h4>Desenvolvido com ‚ù§Ô∏è por:</h4>
            <p>Centro Pok√©mon feito pelos alunos da segunda fase de ci√™ncia da computa√ß√£o da Unoesc:<br>
            Alexandre Lampert, Gustavo Pigatto, Matheus Schavann, Felipe Winter, e Mateus Stock.</p>
        </div>

        <div class="sobre-decor">
            <img class="decor-item pokebola-animada" src="/imagens/pokebola.png" alt="Pok√©bola">
            <img class="decor-item greatball-animada" src="/imagens/pokebola.png" alt="Great Ball">
            <img class="decor-item ultraball-animada" src="/imagens/pokebola.png" alt="Ultra Ball">
            <img class="decor-item masterball-animada" src="/imagens/Bag_Master_Ball_SV_Sprite.png" alt="Master Ball">
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2024 Centro Pok√©mon. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- @scripts   JavaScript externo para anima√ß√µes -->
    <script src="/js/animacoes.js"></script>
    <script>
        const API_BASE_TREINADORES = '/CentroPokemon/api/treinadores';
        const TRAINER_ID_KEY = 'treinador_id';
        const trainerId = localStorage.getItem(TRAINER_ID_KEY);
        const pokemonSelect = document.getElementById('pokemon-select');
        const consultasGrid = document.getElementById('consultas-grid');
        const alertBox = document.getElementById('agendar-alert');

        function setAlert(type, text) {
            alertBox.className = 'alert';
            alertBox.textContent = '';
            if (!text) return;
            alertBox.classList.add(type);
            alertBox.textContent = text;
        }

        async function fetchJson(url, init) {
            const res = await fetch(url, init);
            if (!res.ok) throw new Error(String(res.status));
            return res.json();
        }

        async function carregarPokemons() {
            if (!trainerId) {
                pokemonSelect.innerHTML = '<option value="">Fa√ßa login para agendar</option>';
                pokemonSelect.disabled = true;
                setAlert('error', 'Fa√ßa login para agendar consultas.');
                return;
            }
            const lista = await fetchJson(`${API_BASE_TREINADORES}/${trainerId}/pokemons`);
            pokemonSelect.innerHTML = '';
            for (const p of lista) {
                const opt = document.createElement('option');
                opt.value = String(p.id);
                opt.textContent = `${p.nomePt} (#${p.pokeApiId || p.id})`;
                pokemonSelect.appendChild(opt);
            }
        }

        function renderConsultas(consultas) {
            consultasGrid.innerHTML = '';
            if (!consultas || consultas.length === 0) {
                consultasGrid.innerHTML = '<div class="empty">Nenhuma consulta agendada.</div>';
                return;
            }
            for (const c of consultas) {
                const card = document.createElement('div');
                card.className = 'consulta-item';
                const dt = new Date(c.dataHora);
                const dtStr = dt.toLocaleString('pt-BR');
                card.innerHTML = `
                    <div class="consulta-header">
                        <span class="consulta-tipo">${c.tipo}</span>
                        <span class="consulta-data">${dtStr}</span>
                    </div>
                    <div class="consulta-body">
                        <div class="consulta-pokemon">
                            <img src="${c.pokemonSpriteUrl}" alt="${c.pokemonNome}" />
                            <span>${c.pokemonNome}</span>
                        </div>
                        ${c.observacoes ? `<div class="consulta-obs">${c.observacoes}</div>` : ''}
                    </div>
                `;
                consultasGrid.appendChild(card);
            }
        }

        async function carregarConsultas() {
            if (!trainerId) return;
            const lista = await fetchJson(`${API_BASE_TREINADORES}/${trainerId}/consultas`);
            renderConsultas(lista);
        }

        async function handleAgendar(e) {
            e.preventDefault();
            if (!trainerId) {
                setAlert('error', 'Fa√ßa login para agendar consultas.');
                return;
            }
            const pokemonId = Number(pokemonSelect.value);
            const tipo = document.getElementById('tipo-consulta').value;
            const dataHoraStr = document.getElementById('datahora-consulta').value;
            const observacoes = document.getElementById('obs-consulta').value;
            if (!pokemonId || !tipo || !dataHoraStr) {
                setAlert('error', 'Preencha Pok√©mon, Tipo e Data/Hora.');
                return;
            }
            const body = { pokemonId, tipo, dataHora: dataHoraStr, observacoes };
            try {
                await fetchJson(`${API_BASE_TREINADORES}/${trainerId}/consultas`, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body)
                });
                setAlert('success', 'Consulta agendada com sucesso.');
                await carregarConsultas();
            } catch (err) {
                setAlert('error', 'N√£o foi poss√≠vel agendar.');
            }
        }

        document.getElementById('agendar-consulta-form').addEventListener('submit', handleAgendar);
        carregarPokemons().then(carregarConsultas).catch(() => {});
    </script>
</body>
</html>
